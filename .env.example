# Since the ".env" file is gitignored, you can use the ".env.example" file to
# build a new ".env" file when you clone the repo. Keep this file up-to-date
# when you add new variables to `.env`.

# This file will be committed to version control, so make sure not to have any
# secrets in it. If you are cloning this repo, create a copy of this file named
# ".env" and populate it with your secrets.

# When adding additional environment variables, the schema in "/apps/web/src/env.js"
# should be updated accordingly.

# Next Auth
# You can generate a new secret on the command line with:
# npx auth secret
# https://next-auth.js.org/configuration/options#secret
AUTH_SECRET=""

# Next Auth Discord Provider
AUTH_DISCORD_ID=""
AUTH_DISCORD_SECRET=""

# Prisma
# https://www.prisma.io/docs/reference/database-reference/connection-urls#env
# For local development (using Docker Compose services):
DATABASE_URL="postgresql://postgres:password@localhost:5432/meal-planner-demo?connection_limit=10&pool_timeout=30&connect_timeout=30"
# For production/Dokploy (will be set via environment secrets):
# DATABASE_URL="postgresql://user:password@host:5432/database?connection_limit=10&pool_timeout=30&connect_timeout=30"
# Connection pool parameters:
#   - connection_limit: Maximum number of connections in the pool (default: 10)
#   - pool_timeout: Maximum time (seconds) to wait for a connection from pool (default: 30)
#   - connect_timeout: Maximum time (seconds) to wait for initial database connection (default: 30)
# For SQLite (local development alternative):
# DATABASE_URL="file:./dev.db"

# Seed data (used by `pnpm db:seed`)
# Required for production seeding; optional for local dev.
SEED_USER_PASSWORD=""

# Web app and service ports (used by docker-compose)
# If port 3000 is in use on your host/Dokploy server, set WEB_PORT to a unique value (e.g., 3008)
WEB_PORT=3000
POSTGRES_PORT=5432
MAILPIT_WEB_PORT=8025
MAILPIT_SMTP_PORT=1025

# NEXTAUTH_URL
# For local: keep as http://localhost:${WEB_PORT}
# For Dokploy/production: set to your public URL (https) including basePath
# Example: https://cotyledonlab.com/demos/meal-planner
NEXTAUTH_URL="http://localhost:${WEB_PORT}"

# Custom Domain Configuration (for production deployment)
# Your domain name (configure in Dokploy's domain settings)
DOMAIN="cotyledonlab.com"

# Base path for serving app from subdirectory
# Set to "/demos/meal-planner" for subdirectory deployment (must match Dokploy path config)
# Set to empty string "" for root deployment
# Important: This must match the path configured in Dokploy's domain settings
BASE_PATH="/demos/meal-planner"

# SMTP configuration
# Local development (Mailpit): host mailpit, port 1025, no auth required
# Production (Mailersend): host smtp.mailersend.net, port 587, auth with SMTP user/password
# If SMTP_FROM is left empty, the app will send using the SMTP_USER address.
SMTP_HOST="mailpit"
SMTP_PORT=1025
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM=""

# Gemini image generation (admin dashboard feature)
# Option 1: Vertex AI (recommended - broader availability)
# Set GEMINI_USE_VERTEX_AI=true and configure your GCP project
# Requires: gcloud auth application-default login
GEMINI_USE_VERTEX_AI="true"
GOOGLE_CLOUD_PROJECT=""
GOOGLE_CLOUD_LOCATION="us-central1"

# Option 2: Gemini API directly (geo-restricted)
# Set GEMINI_USE_VERTEX_AI=false and provide API key
# GEMINI_USE_VERTEX_AI="false"
# GEMINI_API_KEY=""

# Model configuration (works with both options)
# Nano Banana Pro (best quality): gemini-3-pro-image-preview
# Nano Banana (faster): gemini-2.5-flash-image
GEMINI_IMAGE_MODEL="gemini-3-pro-image-preview"
GEMINI_IMAGE_FALLBACK_MODEL="gemini-2.5-flash-image"
GEMINI_TEXT_MODEL="gemini-2.5-flash"

# Redis (admin image guardrails, rate limits, quotas)
# Example: redis://localhost:6379
REDIS_URL=""

# Storage provider configuration
# Options: 'local' (default) or 's3' (S3-compatible object storage)
# When set to 'local', images are stored in /public/generated-images
# When set to 's3', images are stored in the configured S3 bucket
STORAGE_PROVIDER="local"

# S3-compatible storage configuration (required when STORAGE_PROVIDER=s3)
# Works with: AWS S3, Hetzner Object Storage, MinIO, DigitalOcean Spaces, Cloudflare R2
S3_BUCKET=""
S3_REGION="us-east-1"
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""

# Custom endpoint for S3-compatible services (required for non-AWS providers)
# Examples:
#   Hetzner Helsinki: https://hel1.your-objectstorage.com
#   Hetzner Falkenstein: https://fsn1.your-objectstorage.com
#   MinIO: http://localhost:9000
#   DigitalOcean Spaces: https://nyc3.digitaloceanspaces.com
S3_ENDPOINT="https://hel1.your-objectstorage.com"

# Use path-style addressing (required for Hetzner, MinIO, and most S3-compatible services)
# Set to "true" for non-AWS providers, "false" for AWS S3
S3_FORCE_PATH_STYLE="true"

# Optional: Custom public URL prefix for CDN or custom domain
# If set, this URL will be used for public image URLs instead of the S3 endpoint
# Example: https://cdn.example.com/recipe-images
S3_PUBLIC_URL_PREFIX=""
